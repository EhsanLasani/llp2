{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/CategoryRail.module.scss [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"active\": \"CategoryRail-module-scss-module__AbTTZG__active\",\n  \"arrow\": \"CategoryRail-module-scss-module__AbTTZG__arrow\",\n  \"badge\": \"CategoryRail-module-scss-module__AbTTZG__badge\",\n  \"block\": \"CategoryRail-module-scss-module__AbTTZG__block\",\n  \"caption\": \"CategoryRail-module-scss-module__AbTTZG__caption\",\n  \"card\": \"CategoryRail-module-scss-module__AbTTZG__card\",\n  \"cardTitle\": \"CategoryRail-module-scss-module__AbTTZG__cardTitle\",\n  \"fade\": \"CategoryRail-module-scss-module__AbTTZG__fade\",\n  \"head\": \"CategoryRail-module-scss-module__AbTTZG__head\",\n  \"inner\": \"CategoryRail-module-scss-module__AbTTZG__inner\",\n  \"left\": \"CategoryRail-module-scss-module__AbTTZG__left\",\n  \"leftFade\": \"CategoryRail-module-scss-module__AbTTZG__leftFade\",\n  \"meta\": \"CategoryRail-module-scss-module__AbTTZG__meta\",\n  \"rail\": \"CategoryRail-module-scss-module__AbTTZG__rail\",\n  \"railWrap\": \"CategoryRail-module-scss-module__AbTTZG__railWrap\",\n  \"right\": \"CategoryRail-module-scss-module__AbTTZG__right\",\n  \"rightFade\": \"CategoryRail-module-scss-module__AbTTZG__rightFade\",\n  \"sub\": \"CategoryRail-module-scss-module__AbTTZG__sub\",\n  \"tab\": \"CategoryRail-module-scss-module__AbTTZG__tab\",\n  \"tabs\": \"CategoryRail-module-scss-module__AbTTZG__tabs\",\n  \"thumb\": \"CategoryRail-module-scss-module__AbTTZG__thumb\",\n  \"title\": \"CategoryRail-module-scss-module__AbTTZG__title\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/llp2/components/CategoryRail.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport clsx from \"clsx\";\r\nimport styles from \"./CategoryRail.module.scss\";\r\n\r\nimport { products } from \"../../lib/products\"; // <- relative import (no alias)\r\nimport type { Route } from \"next\";\r\n\r\n// helper for typed routes (optional)\r\nconst R = (p: string) => p as Route;\r\n\r\n// Build products array from the map — single source of truth\r\nconst productItems = Object.values(products).map((p) => ({\r\n  title: p.title,\r\n  caption: p.subtitle,\r\n  href: R(`/products/${p.slug}`), // <- always matches the slug\r\n  img: p.image ?? \"/images/placeholder.jpg\",\r\n}));\r\n\r\ntype Item = {\r\n  title: string;\r\n  caption?: string;\r\n  href: Route;\r\n  img: string;\r\n  tag?: string;\r\n};\r\ntype Dataset = Record<\"products\" | \"services\" | \"capabilities\", Item[]>;\r\n\r\nconst data: Dataset = {\r\n  products: productItems,\r\n  services: [\r\n    // keep or point temporarily to /services until you add /services/[slug]\r\n    {\r\n      title: \"Deep Hole Drilling\",\r\n      caption: \"Up to 6m\",\r\n      href: R(\"/services\"),\r\n      img: \"/images/services/deep-hole-drilling.jpeg\",\r\n    },\r\n    // ...\r\n  ],\r\n  capabilities: [\r\n    {\r\n      title: \"ISO 9001:2015\",\r\n      caption: \"QA discipline\",\r\n      href: R(\"/about#quality\"),\r\n      img: \"/images/demo/cap-iso.jpg\",\r\n    },\r\n    // ...\r\n  ],\r\n};\r\n/* ----------------------------------------------\r\n   Component\r\n---------------------------------------------- */\r\n\r\nexport default function CategoryRail({\r\n  data = Data,\r\n  title = \"A library you’ll want to get lost in.\",\r\n  subtitle = \"Browse our products, services, and capabilities.\",\r\n  autoScroll = false,\r\n  scrollStep = 1.5,\r\n  scrollInterval = 16,\r\n}: Props) {\r\n  const [tab, setTab] = useState<keyof Dataset>(\"products\");\r\n  const railRef = useRef<HTMLDivElement>(null);\r\n  const hovering = useRef(false);\r\n  const userScrolled = useRef(false);\r\n  const resetTimer = useRef<number | null>(null);\r\n\r\n  const items = useMemo(() => data[tab] ?? [], [data, tab]);\r\n\r\n  // after: const items = useMemo(() => data[tab] ?? [], [data, tab]);\r\n  const renderItems = useMemo(() => [...items, ...items], [items]);\r\n\r\n  const scrollBy = (dx: number) => {\r\n    const el = railRef.current;\r\n    if (!el) return;\r\n    el.scrollBy({ left: dx, behavior: \"smooth\" });\r\n    userScrolled.current = true;\r\n    if (resetTimer.current) window.clearTimeout(resetTimer.current);\r\n    resetTimer.current = window.setTimeout(\r\n      () => (userScrolled.current = false),\r\n      600\r\n    );\r\n  };\r\n\r\n  // Auto-scroll engine\r\n  useEffect(() => {\r\n    if (!autoScroll) return;\r\n    const r = railRef.current;\r\n    if (!r) return;\r\n\r\n    let id: number;\r\n\r\n    const tick = () => {\r\n      if (!railRef.current) return;\r\n\r\n      if (hovering.current || userScrolled.current) {\r\n        id = window.setTimeout(tick, scrollInterval ?? 16);\r\n        return;\r\n      }\r\n\r\n      // amount to move each tick\r\n      const step = scrollStep ?? 1.5;\r\n\r\n      // total width of the duplicated list\r\n      const total = r.scrollWidth;\r\n\r\n      // we only want to “play” across the first half (original list)\r\n      const half = total / 2;\r\n\r\n      // if we've scrolled past half, wrap back by half without a visual jump\r\n      if (r.scrollLeft >= half) {\r\n        r.scrollLeft = r.scrollLeft - half;\r\n      } else {\r\n        r.scrollLeft = r.scrollLeft + step;\r\n      }\r\n\r\n      id = window.setTimeout(tick, scrollInterval ?? 16);\r\n    };\r\n\r\n    id = window.setTimeout(tick, scrollInterval ?? 16);\r\n\r\n    const onUserStart = () => {\r\n      userScrolled.current = true;\r\n      window.clearTimeout(resetTimer.current!);\r\n      resetTimer.current = window.setTimeout(\r\n        () => (userScrolled.current = false),\r\n        500\r\n      );\r\n    };\r\n\r\n    r.addEventListener(\"wheel\", onUserStart, { passive: true });\r\n    r.addEventListener(\"touchstart\", onUserStart, { passive: true });\r\n    r.addEventListener(\"mousedown\", onUserStart);\r\n\r\n    return () => {\r\n      window.clearTimeout(id);\r\n      r.removeEventListener(\"wheel\", onUserStart);\r\n      r.removeEventListener(\"touchstart\", onUserStart);\r\n      r.removeEventListener(\"mousedown\", onUserStart);\r\n    };\r\n  }, [autoScroll, scrollStep, scrollInterval, tab, items]); //\r\n\r\n  return (\r\n    <section className={styles.block} aria-labelledby=\"cat-rail-title\">\r\n      <div className={clsx(\"container\", styles.inner)}>\r\n        <header className={styles.head}>\r\n          <h2 id=\"cat-rail-title\" className={styles.title}>\r\n            {title}\r\n          </h2>\r\n          <p className={styles.sub}>{subtitle}</p>\r\n\r\n          <div className={styles.tabs} role=\"tablist\" aria-label=\"Category\">\r\n            {([\"products\", \"services\", \"capabilities\"] as const).map((key) => (\r\n              <button\r\n                key={key}\r\n                role=\"tab\"\r\n                aria-selected={tab === key}\r\n                className={clsx(styles.tab, tab === key && styles.active)}\r\n                onClick={() => setTab(key)}\r\n                type=\"button\"\r\n              >\r\n                {key[0].toUpperCase() + key.slice(1)}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </header>\r\n\r\n        <div className={styles.railWrap}>\r\n          <button\r\n            className={clsx(styles.arrow, styles.left)}\r\n            aria-label=\"Scroll left\"\r\n            type=\"button\"\r\n            onClick={() => scrollBy(-360)}\r\n          >\r\n            ‹\r\n          </button>\r\n\r\n          <div\r\n            ref={railRef}\r\n            className={styles.rail}\r\n            onMouseEnter={() => (hovering.current = true)}\r\n            onMouseLeave={() => (hovering.current = false)}\r\n            onWheel={() => (userScrolled.current = true)}\r\n          >\r\n            {renderItems.map((it, i) => (\r\n              <Link key={`${tab}-${i}`} href={it.href} className={styles.card}>\r\n                <div className={styles.thumb}>\r\n                  {/* Keep <img> to avoid client/server image boundary issues.\r\n                     If you prefer Next/Image, that works too. */}\r\n                  <img src={it.img} alt={it.title} loading=\"lazy\" />\r\n                  {it.tag && <span className={styles.badge}>{it.tag}</span>}\r\n                </div>\r\n                <div className={styles.meta}>\r\n                  <div className={styles.cardTitle}>{it.title}</div>\r\n                  {it.caption && (\r\n                    <div className={styles.caption}>{it.caption}</div>\r\n                  )}\r\n                </div>\r\n              </Link>\r\n            ))}\r\n          </div>\r\n\r\n          <button\r\n            className={clsx(styles.arrow, styles.right)}\r\n            aria-label=\"Scroll right\"\r\n            type=\"button\"\r\n            onClick={() => scrollBy(360)}\r\n          >\r\n            ›\r\n          </button>\r\n\r\n          <div className={clsx(styles.fade, styles.leftFade)} />\r\n          <div className={clsx(styles.fade, styles.rightFade)} />\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}